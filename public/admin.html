<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secret Santa - Admin Panel</title>
    <link href="https://fonts.googleapis.com/css2?family=Mountains+of+Christmas:wght@400;700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/snowfall.css">
    <link rel="stylesheet" href="/css/components.css">
</head>
<body>
    <div class="snowfall"></div>
    <div class="container">
        <!-- Admin Login -->
        <div id="adminLoginCard" class="card">
            <div class="card-header">
                <h1 class="title christmas-title">ğŸ… Admin Access ğŸ…</h1>
            </div>
            <div class="card-body">
                <form id="adminLoginForm">
                    <div class="form-group">
                        <label for="adminPassword">Admin Password</label>
                        <input type="password" id="adminPassword" required>
                    </div>
                    <div id="loginError" class="error-message" style="display: none;"></div>
                    <button type="submit" class="btn btn-primary">Login</button>
                    <a href="/" class="btn btn-text">â† Back to Login</a>
                </form>
            </div>
        </div>

        <!-- Admin Panel -->
        <div id="adminPanel" style="display: none;">
            <div class="admin-header">
                <h1 class="title christmas-title">Admin Control Panel</h1>
                <button id="adminLogoutBtn" class="btn btn-secondary">Logout</button>
            </div>

            <!-- Game Status -->
            <div class="card">
                <div class="card-header">
                    <h2>ğŸ“Š Game Status</h2>
                </div>
                <div class="card-body">
                    <div id="gameStatus" class="stats-grid"></div>
                    <button id="refreshStatusBtn" class="btn btn-secondary">Refresh Status</button>
                </div>
            </div>

            <!-- Participant Management -->
            <div class="card">
                <div class="card-header">
                    <h2>ğŸ‘¥ Participants</h2>
                </div>
                <div class="card-body">
                    <form id="addParticipantForm" class="admin-form">
                        <div class="form-row">
                            <div class="form-group">
                                <input type="text" id="newFirstName" placeholder="First Name" required>
                            </div>
                            <div class="form-group">
                                <input type="tel" id="newPhoneNumber" placeholder="Phone Number" required>
                            </div>
                            <button type="submit" class="btn btn-primary">Add Participant</button>
                        </div>
                    </form>
                    <div id="participantsList" class="data-table"></div>
                </div>
            </div>

            <!-- Exclusion Rules -->
            <div class="card">
                <div class="card-header">
                    <h2>ğŸš« Exclusion Rules</h2>
                </div>
                <div class="card-body">
                    <form id="addExclusionForm" class="admin-form">
                        <div class="form-row">
                            <select id="exclusionParticipant" required>
                                <option value="">Select Participant</option>
                            </select>
                            <span>cannot pick</span>
                            <select id="exclusionExcluded" required>
                                <option value="">Select Person</option>
                            </select>
                            <input type="text" id="exclusionReason" placeholder="Reason (e.g., spouse)">
                            <button type="submit" class="btn btn-primary">Add Rule</button>
                        </div>
                    </form>
                    <div id="exclusionsList" class="data-table"></div>
                    <h3>Family Group Quick-Add</h3>
                    <form id="addFamilyGroupForm">
                        <div id="familyGroupSelector"></div>
                        <input type="text" id="familyReason" placeholder="Reason (e.g., family)" value="family">
                        <button type="submit" class="btn btn-primary">Add Family Exclusions</button>
                    </form>
                </div>
            </div>

            <!-- SMS Templates -->
            <div class="card">
                <div class="card-header">
                    <h2>ğŸ“± SMS Templates & Preview</h2>
                </div>
                <div class="card-body">
                    <div id="smsTemplatesContainer"></div>
                </div>
            </div>

            <!-- Notifications -->
            <div class="card">
                <div class="card-header">
                    <h2>ğŸ“¤ Send Notifications</h2>
                </div>
                <div class="card-body">
                    <div class="btn-group">
                        <button id="sendGameStartBtn" class="btn btn-primary">Send Game Start ğŸ…</button>
                        <button id="sendWishlistReminderBtn" class="btn btn-secondary">Send Wishlist Reminder ğŸ“</button>
                        <button id="sendShoppingReminderBtn" class="btn btn-secondary">Send Shopping Reminder ğŸ›’</button>
                        <button id="sendExchangeDayBtn" class="btn btn-primary">Send Exchange Day ğŸ‰</button>
                    </div>
                    <div id="smsStats" class="stats-grid"></div>
                </div>
            </div>

            <!-- SMS Logs & Queue -->
            <div class="card">
                <div class="card-header">
                    <h2>ğŸ“‹ SMS Logs & Message Queue</h2>
                </div>
                <div class="card-body">
                    <div style="margin-bottom: 1rem;">
                        <button id="refreshLogsBtn" class="btn btn-secondary btn-sm">ğŸ”„ Refresh Logs</button>
                    </div>

                    <h3 style="margin-bottom: 0.5rem;">Pending Messages (Queue)</h3>
                    <div id="smsQueueList" style="margin-bottom: 2rem;"></div>

                    <h3 style="margin-bottom: 0.5rem;">Sent Messages (History)</h3>
                    <div id="smsSentList"></div>
                </div>
            </div>

            <!-- Exchange Event Settings -->
            <div class="card">
                <div class="card-header">
                    <h2>ğŸ„ Exchange Event Settings</h2>
                </div>
                <div class="card-body">
                    <form id="eventSettingsForm">
                        <div class="form-group">
                            <label for="exchangeTitle">Event Title</label>
                            <input type="text" id="exchangeTitle" placeholder="e.g., McDaniel Family Christmas Exchange">
                        </div>
                        <div class="form-group">
                            <label for="exchangeDate">Exchange Date</label>
                            <input type="date" id="exchangeDate" required>
                        </div>
                        <div class="form-group">
                            <label for="exchangeTime">Exchange Time</label>
                            <input type="time" id="exchangeTime" placeholder="e.g., 18:00">
                        </div>
                        <div class="form-group">
                            <label for="exchangeLocation">Location/Address</label>
                            <textarea id="exchangeLocation" rows="3" placeholder="e.g., 123 Main St, City, State 12345"></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary">Save Event Settings</button>
                    </form>
                </div>
            </div>

            <!-- SMS Template Editor -->
            <div class="card">
                <div class="card-header">
                    <h2>âœ‰ï¸ Edit SMS Templates</h2>
                </div>
                <div class="card-body">
                    <div id="smsTemplateEditor"></div>
                </div>
            </div>

            <!-- Game Controls -->
            <div class="card">
                <div class="card-header">
                    <h2>ğŸ® Game Controls</h2>
                </div>
                <div class="card-body">
                    <div class="btn-group">
                        <button id="validateGameBtn" class="btn btn-secondary">Validate Game</button>
                        <button id="resetAssignmentsBtn" class="btn btn-warning">Reset Assignments</button>
                        <button id="resetAllBtn" class="btn btn-danger">Clear All Data</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="/js/main.js"></script>
    <script src="/js/snowfall.js"></script>
    <script src="/js/admin.js"></script>
</body>
</html>
